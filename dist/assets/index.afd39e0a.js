var H=Object.defineProperty;var T=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var B=(t,e,i)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,P=(t,e)=>{for(var i in e||(e={}))X.call(e,i)&&B(t,i,e[i]);if(T)for(var i of T(e))$.call(e,i)&&B(t,i,e[i]);return t};import{R as g,o as d,c,a as n,n as A,w,v as E,t as S,b as m,p as U,d as Z,e as F,r as M,u as v,f as N,g as O,F as K,h as W}from"./vendor.7f14d553.js";const q=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}};q();var b=(t,e)=>{const i=t.__vccOpts||t;for(const[r,s]of e)i[r]=s;return i};const j=.7,I=.5,D=.8,R=3,h=5,x=20,k=300,l=[60,60],z=10,J=60,Q={components:{},props:{pieces:{type:Array,default:[[.5,"lightgreen"]]},sizemin:{type:Number,default:30},sizemax:{type:Number,default:60},brightness:{type:Number,default:1},width:{type:Number,default:300},height:{type:Number,default:300}},data:function(){return{paper:null,pool:null,baskets:[],startX:0,startY:0,actrect:null,debug:!1,isAuto:!1,isTraining:!1,radiusratio:"",autorunround:0,training_radiusratio:"-",training_round:"",training_rect:"",ratio:0,prev_ratio:0,ratio_bottom:2,ratio_top:20,epoch:0}},mounted:function(){this.init()},methods:{init(){this.paper=g(this.$refs.paper,this.width,this.height);const t=j*this.paper.height,e=this.paper.height-t;this.pool=this.paper.rect(0,0,this.paper.width,t).attr("stroke-width",R),this.baskets.push(this.paper.rect(0,t,I*this.paper.width,e).attr("fill","lightblue").attr("fill-opacity",D).attr("stroke-width",R).data("counter",0).data("pos",{x:h,y:h}).data("name","rect")),this.baskets.push(this.paper.rect(I*this.paper.width,t,I*this.paper.width,e).attr("fill","lightyellow").attr("fill-opacity",D).attr("stroke-width",R).data("counter",0).data("pos",{x:h,y:h}).data("name","round"));let i=0;this.baskets.forEach(r=>{const s=r.attr("x")+r.attr("width")-z-l[0],a=r.attr("y")+r.attr("height")-z-l[1];this.paper.rect(s,a,l[0],l[0],i++==0?0:l[0]/2);let o=this.paper.text(s+l[0]/2,a+l[1]/2,"").attr("font-size",l[1]/2).attr("fill","red").attr("cursor","pointer").attr("z-index",-100).click(()=>this.emptyBasket(r));r.data("text-id",o.id)}),this.make()},make(){this.pieces.forEach(t=>{let e=this.randomSize(),i=this.randomPosition(e,this.pool),r=t[1]||g.getColor(this.brightness),s=this.calcRounding(t[0],e);this.paper.rect(i.x,i.y,e.w,e.h,s).attr("fill",r).attr("cursor","move").data("size",e).data("pos",i).data("type","piece").data("borderradius",s).drag(this.onMove,this.onStart,this.onComplete).onDragOver(this.onDraggedOver),this.debug&&this.paper.text(i.x+e.w/2,i.y+e.h/2,t[0])})},onStart(t,e){this.actrect=this.paper.getElementByPoint(t,e),!!this.actrect&&(this.startX=this.actrect.attr("x"),this.startY=this.actrect.attr("y"))},onMove(t,e,i,r){if(!this.actrect||this.actrect.data("done"))return;const s=this.startX+t,a=this.startY+e,o=this.actrect.attr("width"),u=this.actrect.attr("height");s<=0||a<=0||s+o>=this.paper.width||a+u>=this.paper.height||this.actrect.attr({x:s,y:a})},onComplete(){!this.actrect||(this.actrect.data("done")||this.resetOne(this.actrect),this.startX=0,this.startY=0,this.actrect=null)},onDraggedOver(t){!this.actrect||this.baskets.forEach(e=>{if(t===e&&!this.actrect.data("done")){const i=this.paper.getById(this.actrect.id);i.undrag(),this.fillBasket(e,i)}})},randomPosition(t,e){let i=Math.floor(Math.random()*e.attr("width")),r=Math.floor(Math.random()*e.attr("height"));return i+t.w>=e.attr("width")&&(i=e.attr("width")-t.w),r+t.h>=e.attr("height")&&(r=e.attr("height")-t.h),{x:i,y:r}},serialPosition(t,e,i){const r=i.data("pos"),s=P({},r);return r.x=r.x+t+h,r.x>=i.attr("width")-t-h&&(r.x=h,r.y=r.y+e+h),{x:s.x+i.attr("x"),y:s.y+i.attr("y")}},randomSize(){const t=Math.floor(Math.random()*(this.sizemax-this.sizemin)+this.sizemin);return{w:t,h:t}},calcRounding(t,e){return Math.floor(t*e.w/2)},count(t){t.data("counter")>0?this.paper.getById(t.data("text-id")).attr("text",t.data("counter")):this.paper.getById(t.data("text-id")).attr("text","")},resetOne(t){t.animate({x:t.data("pos").x,y:t.data("pos").y,width:t.data("size").w,height:t.data("size").h},k,"ease-in"),t.data("done")&&t.data("done",!1).attr("cursor","move")},fillBasket(t,e){t.data("counter",t.data("counter")+1),this.count(t),e.data("done",t.id),e.attr("cursor","pointer"),this.orderBasket(t),e.click(()=>{e.unclick(),this.restore(e,t)})},orderBasket(t){t.data("pos",{x:h,y:h}),this.paper.forEach(e=>{if(e.data("done")==t.id){const i=this.serialPosition(x,x,t);e.animate({x:i.x,y:i.y,width:x,height:x},k,"ease-in")}})},restore(t,e){this.resetOne(t),e.data("counter",e.data("counter")-1),this.count(e),this.orderBasket(e)},emptyBasket(t){this.paper.forEach(e=>{e.data("done")==t.id&&this.restore(e,t)}),t.data("counter",0)},autoRun(){const t=i=>new Promise(r=>setTimeout(r,i));let e=0;this.autorunround=this.pieces.length,this.paper.forEach(i=>{if(i.data("type")!="piece"||i.data("done"))return;let r=this.getAutoBasket(i);t(e++*J).then(()=>{let s=this.getBasketcenter(r);i.animate({x:s.x,y:s.y},k,"ease-in"),this.fillBasket(r,i),this.autorunround--})})},async autoTrain(){let t="",e=parseInt(this.training_rect)+parseInt(this.training_round);for(this.radiusratio=this.ratio_top,this.prev_ratio=this.ratio_top,this.epoch=0;t=this.calcError(e);){if(t=="done"){this.autoRun();break}this.epoch++,this.training_radiusratio=parseInt(this.radiusratio*100)/100,this.autoRun(),await new Promise(i=>setTimeout(i,3e3)),e=this.getBasketCount("round"),this.baskets.forEach(i=>this.emptyBasket(i)),await new Promise(i=>setTimeout(i,1500))}},getBasketCount(t){let e;return this.baskets.forEach(i=>{i.data("name")==t&&(e=i.data("counter"))}),e},calcError(t){parseInt(this.training_rect);const e=parseInt(this.training_round);this.radiusratio<=this.ratio_bottom;let i=e-t;return i==0?"done":(this.prev_ratio/=2,console.log(this.epoch,this.radiusratio,i),i<0?(this.radiusratio-=this.prev_ratio,!0):(this.radiusratio+=this.prev_ratio,!0))},getBasketcenter(t){return{x:t.attr("x")+t.attr("width")/2,y:t.attr("y")+t.attr("height")/2}},getAutoBasket(t){return this.radiusratio?t.data("size").w/t.data("borderradius")>=this.radiusratio?this.baskets[0]:this.baskets[1]:this.baskets[0]}}},C=t=>(U("data-v-7a084c90"),t=t(),Z(),t),tt={class:"controls"},et={key:0,class:"control"},it=C(()=>n("span",{class:"rect"},null,-1)),st=C(()=>n("span",{class:"round"},null,-1)),rt={class:"output"},at={class:"output"},ot=F("Parameter: "),nt={class:"controls"},ht={key:0,class:"control"},lt=C(()=>n("p",null,"Size / Border Radius",-1));function dt(t,e,i,r,s,a){return d(),c("div",null,[n("div",{style:A({width:i.width+"px",height:i.height+"px"}),id:"paper",ref:"paper"},null,4),n("div",tt,[n("button",{onClick:e[0]||(e[0]=o=>t.isTraining=!t.isTraining)},"Training"),t.isTraining?(d(),c("div",et,[it,w(n("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>t.training_rect=o)},null,512),[[E,t.training_rect]]),st,w(n("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>t.training_round=o)},null,512),[[E,t.training_round]]),n("span",rt,"Epoch: "+S(t.epoch),1),n("span",at,[ot,n("span",null,S(t.training_radiusratio),1)]),n("button",{class:"run",onClick:e[3]||(e[3]=(...o)=>a.autoTrain&&a.autoTrain(...o))},"Train")])):m("",!0)]),n("div",nt,[n("button",{onClick:e[4]||(e[4]=o=>t.isAuto=!t.isAuto)},"Parameter"),t.isAuto?(d(),c("div",ht,[lt,w(n("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=o=>t.radiusratio=o)},null,512),[[E,t.radiusratio]]),n("button",{class:"run",onClick:e[6]||(e[6]=(...o)=>a.autoRun&&a.autoRun(...o))},"Run")])):m("",!0)])])}var pt=b(Q,[["render",dt],["__scopeId","data-v-7a084c90"]]);const ut=3,_=25,G=.2,L=12,y=15,Y=.5,p=15,ct={components:{},props:{pieces:{type:Array,default:[]},brightness:{type:Number,default:1},width:{type:Number,default:300},height:{type:Number,default:300},draggerColor:{type:String,default:""}},data:function(){return{svmpaper:null,svmpool:null,debug:!1,dist:0,x:0,y:0,x1:0,y1:0,draggers:[],startx:0,starty:0,actmoving:null}},mounted:function(){this.init()},methods:{init(){this.svmpaper=g(this.$refs.svmpaper,this.width,this.height),this.svmpool=this.svmpaper.rect(_,_,this.svmpaper.width-_*2,this.svmpaper.height-_*2).attr("stroke-width",ut),this.x=this.svmpool.attr("x"),this.y=this.svmpool.attr("y"),this.x1=this.x+this.svmpool.attr("width"),this.y1=this.y+this.svmpool.attr("height"),this.dist=this.svmpool.attr("width")/10,this.makeGrid(),this.makePieces()},makePieces(){this.pieces.forEach(t=>{t.type==1&&this.svmpaper.circle(this.calcPosX(t.x),this.calcPosY(t.y),y).attr("fill","lightgreen"),t.type==2&&this.svmpaper.rect(this.calcPosX(t.x)-y,this.calcPosY(t.y)-y,y*2,y*2).attr("fill","CC0000")})},makeGrid(){for(let t=1;t<10;t++)this.svmpaper.path("M"+this.x+","+(this.y+t*this.dist)+"H"+this.x1).attr("opacity",G),this.svmpaper.path("M"+(this.y+t*this.dist)+","+this.x+"V"+this.y1).attr("opacity",G);for(let t=0;t<=10;t++)this.svmpaper.text(5,this.y+t*this.dist,10-t).attr("font-size",L),this.svmpaper.text(this.x+t*this.dist,this.y1+20,t).attr("font-size",L)},makeRuler(){let t=this.draggers.length,e=this.draggerColor||g.getColor(this.brightness),i=this.svmpaper.rect(this.calcPosX(-.5),this.calcPosY(Y),p,p).data("id",t).attr("fill",e).drag(this.onMove,this.onStart,this.onComplete),r=this.svmpaper.rect(this.calcPosX(10.2),this.calcPosY(Y),p,p).data("id",t).attr("fill",e).drag(this.onMove,this.onStart,this.onComplete);this.draggers.push({id:t,left:i,right:r,line:null,color:e}),this.drawLine(t)},clearRulers(){this.draggers.forEach(t=>{t.left.remove(),t.right.remove(),t.line.remove()}),this.draggers.splice(0)},drawLine(t){let e=this.draggers[t];e.line!==null&&e.line.remove();let i=e.left.attr("x")+e.left.attr("width"),r=e.left.attr("y")+e.left.attr("height")/2,s=e.right.attr("x"),a=e.right.attr("y")+e.right.attr("height")/2;e.line=this.svmpaper.path("M "+i+" "+r+"L"+s+" "+a).attr("stroke-width",3).attr("stroke",e.color)},calcPosX(t){return this.x+t*this.dist},calcPosY(t){return this.y1-t*this.dist},onMove(t,e){let i=e+this.starty;i<0&&(i=0),i>this.height-p&&(i=this.height-p),this.actmoving.attr({x:this.startx,y:i}),this.drawLine(this.actmoving.data("id"))},onStart(t,e){this.actmoving=this.svmpaper.getElementByPoint(t,e),this.startx=this.actmoving.attr("x"),this.starty=this.actmoving.attr("y")},onComplete(){}}},yt={class:"controls"};function ft(t,e,i,r,s,a){return d(),c("div",null,[n("div",{style:A({width:i.width+"px",height:i.height+"px"}),id:"svmpaper",ref:"svmpaper"},null,4),n("div",yt,[n("button",{onClick:e[0]||(e[0]=(...o)=>a.makeRuler&&a.makeRuler(...o))},"+ Add Ruler"),n("button",{onClick:e[1]||(e[1]=(...o)=>a.clearRulers&&a.clearRulers(...o))},"Clear")])])}var gt=b(ct,[["render",ft],["__scopeId","data-v-00564571"]]);const mt={id:"buttons"},vt={setup(t){const e=[[.5],[.8],[1],[.9],[.6],[.9],[.4],[.67],[.8],[.3],[.25],[.15],[.75],[.6],[.82],[.84],[.95],[.9],[.8],[.84]],i=.9,r=[{type:2,x:2.8,y:9.1},{type:2,x:3.9,y:8.3},{type:2,x:1.5,y:7},{type:2,x:5.2,y:7.1},{type:2,x:8.6,y:8.1},{type:2,x:6.3,y:8},{type:2,x:5,y:6},{type:2,x:6.5,y:6.7},{type:2,x:7.6,y:6},{type:2,x:6.2,y:5.3},{type:2,x:4.2,y:4.5},{type:2,x:1.3,y:4.3},{type:2,x:8.3,y:3.9},{type:2,x:1.9,y:3.1},{type:1,x:5.9,y:3},{type:1,x:9.2,y:5.6},{type:1,x:.9,y:5.6},{type:1,x:2.5,y:5},{type:1,x:7,y:3.9},{type:1,x:1.1,y:2.8},{type:1,x:3.1,y:3.1},{type:1,x:.8,y:1.8},{type:1,x:2,y:.9},{type:1,x:4,y:2},{type:1,x:4.9,y:1},{type:1,x:7,y:1},{type:1,x:8.3,y:2.3}];let s=M(!0),a=M(!1);function o(u){u=="choice"&&(s.value=!0,a.value=!1),u=="svm"&&(s.value=!1,a.value=!0)}return(u,f)=>(d(),c(K,null,[v(s)?(d(),N(pt,{key:0,pieces:e,brightness:i,width:500,height:500})):m("",!0),v(a)?(d(),N(gt,{key:1,pieces:r,brightness:i,width:500,height:500})):m("",!0),n("div",mt,[n("button",{class:O({active:v(s)}),onClick:f[0]||(f[0]=V=>o("choice"))},"Choice",2),n("button",{class:O({active:v(a)}),onClick:f[1]||(f[1]=V=>o("svm"))},"SVM",2)])],64))}};W(vt).mount("#app");
