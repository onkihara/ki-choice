var b=Object.defineProperty;var A=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var I=(t,e,i)=>e in t?b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,C=(t,e)=>{for(var i in e||(e={}))L.call(e,i)&&I(t,i,e[i]);if(A)for(var i of A(e))Y.call(e,i)&&I(t,i,e[i]);return t};import{R as m,o as l,c as p,a as h,n as k,b as y,w as H,v as X,r as B,u as x,d as M,e as P,F as $,f as V}from"./vendor.a9413161.js";const Z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}};Z();var N=(t,e)=>{const i=t.__vccOpts||t;for(const[r,s]of e)i[r]=s;return i};const F=.7,_=.5,O=.8,E=3,n=5,v=20,R=300,d=[60,60],S=10,K=60,U={components:{},props:{pieces:{type:Array,default:[[.5,"lightgreen"]]},sizemin:{type:Number,default:30},sizemax:{type:Number,default:60},brightness:{type:Number,default:1},width:{type:Number,default:300},height:{type:Number,default:300}},data:function(){return{paper:null,pool:null,baskets:[],startX:0,startY:0,actrect:null,debug:!1,isAuto:!1,radiusratio:""}},mounted:function(){this.init()},methods:{init(){this.paper=m(this.$refs.paper,this.width,this.height);const t=F*this.paper.height,e=this.paper.height-t;this.pool=this.paper.rect(0,0,this.paper.width,t).attr("stroke-width",E),this.baskets.push(this.paper.rect(0,t,_*this.paper.width,e).attr("fill","lightblue").attr("fill-opacity",O).attr("stroke-width",E).data("counter",0).data("pos",{x:n,y:n})),this.baskets.push(this.paper.rect(_*this.paper.width,t,_*this.paper.width,e).attr("fill","lightyellow").attr("fill-opacity",O).attr("stroke-width",E).data("counter",0).data("pos",{x:n,y:n}));let i=0;this.baskets.forEach(r=>{const s=r.attr("x")+r.attr("width")-S-d[0],a=r.attr("y")+r.attr("height")-S-d[1];this.paper.rect(s,a,d[0],d[0],i++==0?0:d[0]/2);let o=this.paper.text(s+d[0]/2,a+d[1]/2,"").attr("font-size",d[1]/2).attr("fill","red").attr("cursor","pointer").attr("z-index",-100).click(()=>this.emptyBasket(r));r.data("text-id",o.id)}),this.make()},make(){this.pieces.forEach(t=>{let e=this.randomSize(),i=this.randomPosition(e,this.pool),r=t[1]||m.getColor(this.brightness),s=this.calcRounding(t[0],e);this.paper.rect(i.x,i.y,e.w,e.h,s).attr("fill",r).attr("cursor","move").data("size",e).data("pos",i).data("type","piece").data("borderradius",s).drag(this.onMove,this.onStart,this.onComplete).onDragOver(this.onDraggedOver),this.debug&&this.paper.text(i.x+e.w/2,i.y+e.h/2,t[0])})},onStart(t,e){this.actrect=this.paper.getElementByPoint(t,e),this.startX=this.actrect.attr("x"),this.startY=this.actrect.attr("y")},onMove(t,e,i,r){if(this.actrect.data("done"))return;const s=this.startX+t,a=this.startY+e,o=this.actrect.attr("width"),u=this.actrect.attr("height");s<=0||a<=0||s+o>=this.paper.width||a+u>=this.paper.height||this.actrect.attr({x:s,y:a})},onComplete(){this.actrect.data("done")||this.resetOne(this.actrect),this.startX=0,this.startY=0,this.actrect=null},onDraggedOver(t){this.baskets.forEach(e=>{if(t===e&&!this.actrect.data("done")){const i=this.paper.getById(this.actrect.id);i.undrag(),this.fillBasket(e,i)}})},randomPosition(t,e){let i=Math.floor(Math.random()*e.attr("width")),r=Math.floor(Math.random()*e.attr("height"));return i+t.w>=e.attr("width")&&(i=e.attr("width")-t.w),r+t.h>=e.attr("height")&&(r=e.attr("height")-t.h),{x:i,y:r}},serialPosition(t,e,i){const r=i.data("pos"),s=C({},r);return r.x=r.x+t+n,r.x>=i.attr("width")-t-n&&(r.x=n,r.y=r.y+e+n),{x:s.x+i.attr("x"),y:s.y+i.attr("y")}},randomSize(){const t=Math.floor(Math.random()*(this.sizemax-this.sizemin)+this.sizemin);return{w:t,h:t}},calcRounding(t,e){return Math.floor(t*e.w/2)},count(t){t.data("counter")>0?this.paper.getById(t.data("text-id")).attr("text",t.data("counter")):this.paper.getById(t.data("text-id")).attr("text","")},resetOne(t){t.animate({x:t.data("pos").x,y:t.data("pos").y,width:t.data("size").w,height:t.data("size").h},R,"ease-in"),t.data("done")&&t.data("done",!1).attr("cursor","move")},fillBasket(t,e){t.data("counter",t.data("counter")+1),this.count(t),e.data("done",t.id),e.attr("cursor","pointer"),this.orderBasket(t),e.click(()=>{e.unclick(),this.restore(e,t)})},orderBasket(t){t.data("pos",{x:n,y:n}),this.paper.forEach(e=>{if(e.data("done")==t.id){const i=this.serialPosition(v,v,t);e.animate({x:i.x,y:i.y,width:v,height:v},R,"ease-in")}})},restore(t,e){this.resetOne(t),e.data("counter",e.data("counter")-1),this.count(e),this.orderBasket(e)},emptyBasket(t){this.paper.forEach(e=>{e.data("done")==t.id&&this.restore(e,t)}),t.data("counter",0)},autoRun(){const t=i=>new Promise(r=>setTimeout(r,i));let e=0;this.paper.forEach(i=>{if(i.data("type")!="piece"||i.data("done"))return;let r=this.getAutoBasket(i);t(e++*K).then(()=>{let s=this.getBasketcenter(r);i.animate({x:s.x,y:s.y},R,"ease-in"),this.fillBasket(r,i)})})},getBasketcenter(t){return{x:t.attr("x")+t.attr("width")/2,y:t.attr("y")+t.attr("height")/2}},getAutoBasket(t){return this.radiusratio?t.data("size").w/t.data("borderradius")>=this.radiusratio?this.baskets[0]:this.baskets[1]:this.baskets[0]}}},W={class:"controls"},q={key:0};function j(t,e,i,r,s,a){return l(),p("div",null,[h("div",{style:k({width:i.width+"px",height:i.height+"px"}),id:"paper",ref:"paper"},null,4),h("div",W,[h("button",{onClick:e[0]||(e[0]=o=>t.isAuto=!t.isAuto)},"Auto"),t.isAuto?(l(),p("p",q,"Size / Border Radius")):y("",!0),t.isAuto?H((l(),p("input",{key:1,type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>t.radiusratio=o)},null,512)),[[X,t.radiusratio]]):y("",!0),t.isAuto?(l(),p("button",{key:2,onClick:e[2]||(e[2]=(...o)=>a.autoRun&&a.autoRun(...o))},"Run")):y("",!0)])])}var J=N(U,[["render",j],["__scopeId","data-v-dc6308a6"]]);const Q=3,w=25,T=.2,D=12,f=15,z=.5,c=15,tt={components:{},props:{pieces:{type:Array,default:[]},brightness:{type:Number,default:1},width:{type:Number,default:300},height:{type:Number,default:300},draggerColor:{type:String,default:""}},data:function(){return{svmpaper:null,svmpool:null,debug:!1,dist:0,x:0,y:0,x1:0,y1:0,draggers:[],startx:0,starty:0,actmoving:null}},mounted:function(){this.init()},methods:{init(){this.svmpaper=m(this.$refs.svmpaper,this.width,this.height),this.svmpool=this.svmpaper.rect(w,w,this.svmpaper.width-w*2,this.svmpaper.height-w*2).attr("stroke-width",Q),this.x=this.svmpool.attr("x"),this.y=this.svmpool.attr("y"),this.x1=this.x+this.svmpool.attr("width"),this.y1=this.y+this.svmpool.attr("height"),this.dist=this.svmpool.attr("width")/10,this.makeGrid(),this.makePieces()},makePieces(){this.pieces.forEach(t=>{t.type==1&&this.svmpaper.circle(this.calcPosX(t.x),this.calcPosY(t.y),f).attr("fill","lightgreen"),t.type==2&&this.svmpaper.rect(this.calcPosX(t.x)-f,this.calcPosY(t.y)-f,f*2,f*2).attr("fill","CC0000")})},makeGrid(){for(let t=1;t<10;t++)this.svmpaper.path("M"+this.x+","+(this.y+t*this.dist)+"H"+this.x1).attr("opacity",T),this.svmpaper.path("M"+(this.y+t*this.dist)+","+this.x+"V"+this.y1).attr("opacity",T);for(let t=0;t<=10;t++)this.svmpaper.text(5,this.y+t*this.dist,10-t).attr("font-size",D),this.svmpaper.text(this.x+t*this.dist,this.y1+20,t).attr("font-size",D)},makeRuler(){let t=this.draggers.length,e=this.draggerColor||m.getColor(this.brightness),i=this.svmpaper.rect(this.calcPosX(-.5),this.calcPosY(z),c,c).data("id",t).attr("fill",e).drag(this.onMove,this.onStart,this.onComplete),r=this.svmpaper.rect(this.calcPosX(10.2),this.calcPosY(z),c,c).data("id",t).attr("fill",e).drag(this.onMove,this.onStart,this.onComplete);this.draggers.push({id:t,left:i,right:r,line:null,color:e}),this.drawLine(t)},clearRulers(){this.draggers.forEach(t=>{t.left.remove(),t.right.remove(),t.line.remove()}),this.draggers.splice(0)},drawLine(t){let e=this.draggers[t];e.line!==null&&e.line.remove();let i=e.left.attr("x")+e.left.attr("width"),r=e.left.attr("y")+e.left.attr("height")/2,s=e.right.attr("x"),a=e.right.attr("y")+e.right.attr("height")/2;e.line=this.svmpaper.path("M "+i+" "+r+"L"+s+" "+a).attr("stroke-width",3).attr("stroke",e.color)},calcPosX(t){return this.x+t*this.dist},calcPosY(t){return this.y1-t*this.dist},onMove(t,e){let i=e+this.starty;i<0&&(i=0),i>this.height-c&&(i=this.height-c),this.actmoving.attr({x:this.startx,y:i}),this.drawLine(this.actmoving.data("id"))},onStart(t,e){this.actmoving=this.svmpaper.getElementByPoint(t,e),this.startx=this.actmoving.attr("x"),this.starty=this.actmoving.attr("y")},onComplete(){}}},et={class:"controls"};function it(t,e,i,r,s,a){return l(),p("div",null,[h("div",{style:k({width:i.width+"px",height:i.height+"px"}),id:"svmpaper",ref:"svmpaper"},null,4),h("div",et,[h("button",{onClick:e[0]||(e[0]=(...o)=>a.makeRuler&&a.makeRuler(...o))},"+ Add Ruler"),h("button",{onClick:e[1]||(e[1]=(...o)=>a.clearRulers&&a.clearRulers(...o))},"Clear")])])}var st=N(tt,[["render",it],["__scopeId","data-v-00564571"]]);const rt={id:"buttons"},at={setup(t){const e=[[.5],[.8],[1],[.9],[.6],[.9],[.4],[.67],[.8],[.3],[.25],[.15],[.75],[.6],[.82],[.84],[.95],[.9],[.8],[.84]],i=.9,r=[{type:2,x:2.8,y:9.1},{type:2,x:3.9,y:8.3},{type:2,x:1.5,y:7},{type:2,x:5.2,y:7.1},{type:2,x:8.6,y:8.1},{type:2,x:6.3,y:8},{type:2,x:5,y:6},{type:2,x:6.5,y:6.7},{type:2,x:7.6,y:6},{type:2,x:6.2,y:5.3},{type:2,x:4.2,y:4.5},{type:2,x:1.3,y:4.3},{type:2,x:8.3,y:3.9},{type:2,x:1.9,y:3.1},{type:1,x:5.9,y:3},{type:1,x:9.2,y:5.6},{type:1,x:.9,y:5.6},{type:1,x:2.5,y:5},{type:1,x:7,y:3.9},{type:1,x:1.1,y:2.8},{type:1,x:3.1,y:3.1},{type:1,x:.8,y:1.8},{type:1,x:2,y:.9},{type:1,x:4,y:2},{type:1,x:4.9,y:1},{type:1,x:7,y:1},{type:1,x:8.3,y:2.3}];let s=B(!0),a=B(!1);function o(u){u=="choice"&&(s.value=!0,a.value=!1),u=="svm"&&(s.value=!1,a.value=!0)}return(u,g)=>(l(),p($,null,[x(s)?(l(),M(J,{key:0,pieces:e,brightness:i,width:500,height:500})):y("",!0),x(a)?(l(),M(st,{key:1,pieces:r,brightness:i,width:500,height:500})):y("",!0),h("div",rt,[h("button",{class:P({active:x(s)}),onClick:g[0]||(g[0]=G=>o("choice"))},"Choice",2),h("button",{class:P({active:x(a)}),onClick:g[1]||(g[1]=G=>o("svm"))},"SVM",2)])],64))}};V(at).mount("#app");
